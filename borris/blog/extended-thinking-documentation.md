---
title: "Extended Thinking Documentation"
source_url: "https://docs.anthropic.com/en/docs/build-with-claude/extended-thinking"
source_type: blog
mentor: "Borris"
date_synced: "2026-02-20T00:00:00Z"
---

# Extended Thinking Documentation

Extended thinking gives Claude enhanced reasoning capabilities for complex tasks, while providing varying levels of transparency into its step-by-step thought process before it delivers its final answer.

For Claude Opus 4.6, use adaptive thinking (thinking: {type: "adaptive"}) with the effort parameter instead of the manual thinking mode. The manual thinking: {type: "enabled", budget_tokens: N} configuration is deprecated on Opus 4.6 and will be removed in a future model release.

## Supported Models

Extended thinking is supported in the following models:

- Claude Opus 4.6 (claude-opus-4-6), adaptive thinking only; manual mode (type: "enabled") is deprecated
- Claude Opus 4.5 (claude-opus-4-5-20251101)
- Claude Opus 4.1 (claude-opus-4-1-20250805)
- Claude Opus 4 (claude-opus-4-20250514)
- Claude Sonnet 4.6 (claude-sonnet-4-6), supports both manual extended thinking with interleaved mode and adaptive thinking
- Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)
- Claude Sonnet 4 (claude-sonnet-4-20250514)
- Claude Sonnet 3.7 (claude-3-7-sonnet-20250219) (deprecated)
- Claude Haiku 4.5 (claude-haiku-4-5-20251001)

## How Extended Thinking Works

When extended thinking is turned on, Claude creates thinking content blocks where it outputs its internal reasoning. Claude incorporates insights from this reasoning before crafting a final response.

The API response will include thinking content blocks, followed by text content blocks.

Example response format:

```json
{
  "content": [
    {
      "type": "thinking",
      "thinking": "Let me analyze this step by step...",
      "signature": "WaUjzkypQ2mUEVM36O2TxuC06KN8xyfbJwyem2dw3URve/op91XWHOEBLLqIOMfFG/UvLEczmEsUjavL...."
    },
    {
      "type": "text",
      "text": "Based on my analysis..."
    }
  ]
}
```

## How to Use Extended Thinking

To turn on extended thinking, add a thinking object, with the type parameter set to enabled and the budget_tokens to a specified token budget for extended thinking. For Claude Opus 4.6, use type: "adaptive" instead.

The budget_tokens parameter determines the maximum number of tokens Claude is allowed to use for its internal reasoning process. Larger budgets can improve response quality by enabling more thorough analysis for complex problems.

Note: budget_tokens is deprecated on Claude Opus 4.6. Use adaptive thinking with the effort parameter to control thinking depth instead.

Claude Opus 4.6 supports up to 128K output tokens. Earlier models support up to 64K output tokens.

### Summarized Thinking

With extended thinking enabled, the Messages API for Claude 4 models returns a summary of Claude's full thinking process. Summarized thinking provides the full intelligence benefits of extended thinking, while preventing misuse.

Key considerations:
- You're charged for the full thinking tokens generated by the original request, not the summary tokens
- The billed output token count will not match the count of tokens you see in the response
- The first few lines of thinking output are more verbose, providing detailed reasoning helpful for prompt engineering
- Claude Sonnet 3.7 continues to return full thinking output

### Streaming Thinking

You can stream extended thinking responses using server-sent events (SSE). When streaming is enabled, you receive thinking content via thinking_delta events.

## Extended Thinking with Tool Use

Extended thinking can be used alongside tool use, allowing Claude to reason through tool selection and results processing.

Limitations:
1. Tool use with thinking only supports tool_choice: {"type": "auto"} (the default) or tool_choice: {"type": "none"}
2. During tool use, you must pass thinking blocks back to the API for the last assistant message

### Interleaved Thinking

Extended thinking with tool use in Claude 4 models supports interleaved thinking, which enables Claude to think between tool calls and make more sophisticated reasoning after receiving tool results.

Model support:
- Claude Opus 4.6: Automatically enabled with adaptive thinking
- Claude Sonnet 4.6: Supports the interleaved-thinking-2025-05-14 beta header
- Other Claude 4 models: Add the beta header interleaved-thinking-2025-05-14

## Extended Thinking with Prompt Caching

Important considerations:
- Thinking blocks from previous turns are removed from context, which can affect cache breakpoints
- Changes to thinking parameters invalidate message cache breakpoints
- System prompts and tools remain cached despite thinking parameter changes

## Max Tokens and Context Window Size

With Claude 3.7 and 4 models, max_tokens (which includes your thinking budget when thinking is enabled) is enforced as a strict limit. The system will return a validation error if prompt tokens + max_tokens exceeds the context window size.

## Thinking Encryption

Full thinking content is encrypted and returned in the signature field. This field is used to verify that thinking blocks were generated by Claude when passed back to the API.

### Thinking Redaction

Occasionally Claude's internal reasoning will be flagged by safety systems. When this occurs, we encrypt some or all of the thinking block and return it as a redacted_thinking block.

## Best Practices

### Working with Thinking Budgets
- Start at the minimum (1,024 tokens) and increase incrementally
- Start with larger thinking budgets (16k+ tokens) for complex tasks
- For thinking budgets above 32k, use batch processing
- Monitor thinking token usage to optimize costs

### Performance Considerations
- Be prepared for potentially longer response times
- The SDKs require streaming when max_tokens is greater than 21,333

### Feature Compatibility
- Not compatible with temperature or top_k modifications
- Cannot pre-fill responses when thinking is enabled
- Changes to the thinking budget invalidate cached prompt prefixes

### Usage Guidelines
- Use for complex tasks that benefit from step-by-step reasoning
- Review extended thinking prompting tips for best practices
